<% key = SecureRandom.hex(64) %>
<% games_secret = SecureRandom.hex(64) %>
<%# FIXME: to a helper %>
<% rails_env = node.chef_environment == "production" ? "production" : "development" %>
<% client = rails_env == "production" ? "https://quizz.virouleau.fr" : "http://localhost:3000" %>

export RAILS_ENV="<%= rails_env %>"
export GOOGLE_CLIENT_ID="foo"
export GOOGLE_CLIENT_SECRET="bar"
export SECRET_KEY_BASE="<%= key %>"
export GAMES_SECRET="<%= games_secret %>"
export CLIENT_ORIGIN="<%= client %>"
export BTEST_DATABASE_PASSWORD="notthepassword"

env_dir="$HOME/btest/env"
# Override with any other env setup there
oauth_file="$env_dir/env.oauth"
if [ -f "$oauth_file" ]; then
  source $oauth_file
fi

db_file="$env_dir/env-db"
if [ -f "$db_file" ]; then
  source $db_file
fi
